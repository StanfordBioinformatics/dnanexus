
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
        <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>gbsc_dnanexus.utils &#8212; GBSC Dnanexus 0.1.0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="GBSC DNAnexus package" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-gbsc_dnanexus.utils">
<span id="gbsc-dnanexus-utils"></span><h1>gbsc_dnanexus.utils<a class="headerlink" href="#module-gbsc_dnanexus.utils" title="Permalink to this headline">¶</a></h1>
<dl class="exception">
<dt id="gbsc_dnanexus.utils.DxProjectNotFound">
<em class="property">exception </em><code class="descclassname">gbsc_dnanexus.utils.</code><code class="descname">DxProjectNotFound</code><a class="reference internal" href="_modules/gbsc_dnanexus/utils.html#DxProjectNotFound"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gbsc_dnanexus.utils.DxProjectNotFound" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="exception">
<dt id="gbsc_dnanexus.utils.DxApiKeyNotFound">
<em class="property">exception </em><code class="descclassname">gbsc_dnanexus.utils.</code><code class="descname">DxApiKeyNotFound</code><a class="reference internal" href="_modules/gbsc_dnanexus/utils.html#DxApiKeyNotFound"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gbsc_dnanexus.utils.DxApiKeyNotFound" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Raised when the environment variable DX_SECURITY_CONTEXT isn’t set.</p>
</dd></dl>

<dl class="exception">
<dt id="gbsc_dnanexus.utils.UnknownDNAnexusUsername">
<em class="property">exception </em><code class="descclassname">gbsc_dnanexus.utils.</code><code class="descname">UnknownDNAnexusUsername</code><a class="reference internal" href="_modules/gbsc_dnanexus/utils.html#UnknownDNAnexusUsername"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gbsc_dnanexus.utils.UnknownDNAnexusUsername" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="exception">
<dt id="gbsc_dnanexus.utils.InvalidAuthToken">
<em class="property">exception </em><code class="descclassname">gbsc_dnanexus.utils.</code><code class="descname">InvalidAuthToken</code><a class="reference internal" href="_modules/gbsc_dnanexus/utils.html#InvalidAuthToken"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gbsc_dnanexus.utils.InvalidAuthToken" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="function">
<dt id="gbsc_dnanexus.utils.get_dx_username">
<code class="descclassname">gbsc_dnanexus.utils.</code><code class="descname">get_dx_username</code><span class="sig-paren">(</span><em>strip_prefix=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gbsc_dnanexus/utils.html#get_dx_username"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gbsc_dnanexus.utils.get_dx_username" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the DNAnexus username of the currently logged-in user (i.e. user-nathankw).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>strip_prefix</strong> – <cite>bool</cite>. True indicates to remove the ‘user-‘ prefix of the DNAnexus username
prior to returning it.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The DNAnexus user name.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><cite>str</cite></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="gbsc_dnanexus.utils.add_props_to_file">
<code class="descclassname">gbsc_dnanexus.utils.</code><code class="descname">add_props_to_file</code><span class="sig-paren">(</span><em>project_id</em>, <em>file_id</em>, <em>props</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gbsc_dnanexus/utils.html#add_props_to_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gbsc_dnanexus.utils.add_props_to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a call to <code class="docutils literal notranslate"><span class="pre">dxpy.api.file_set_properties</span></code>.</p>
<p>Any properties with the same name as existing properties on the file will be overwritten.
An existing property can also be removed by setting its value to the None object in the passed-in
<cite>props</cite> dictionary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>project_id</strong> – <cite>str</cite>. The DNAnexus project ID in which file_id belongs.</li>
<li><strong>file_id</strong> – <cite>str</cite>. The ID of the file in DNAnexus to which the props are to be added.</li>
<li><strong>props</strong> – <cite>dict</cite>. Keys are property names. Use the None object as a value to remove a property.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="gbsc_dnanexus.utils.strip_dx_userprefix">
<code class="descclassname">gbsc_dnanexus.utils.</code><code class="descname">strip_dx_userprefix</code><span class="sig-paren">(</span><em>dx_username</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gbsc_dnanexus/utils.html#strip_dx_userprefix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gbsc_dnanexus.utils.strip_dx_userprefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the “user-” prefix of the passed-in DNAnexus username if it is present.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dx_username</strong> – <cite>str</cite>. i.e. “user-nathankw”.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The DNAnexus username without a ‘user-‘ prefix.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><cite>str</cite></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="gbsc_dnanexus.utils.add_dx_userprefix">
<code class="descclassname">gbsc_dnanexus.utils.</code><code class="descname">add_dx_userprefix</code><span class="sig-paren">(</span><em>dx_username</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gbsc_dnanexus/utils.html#add_dx_userprefix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gbsc_dnanexus.utils.add_dx_userprefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the “user-” prefix of the passed-in DNAnexus username if it isn’t already present.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dx_username</strong> – <cite>str</cite>. i.e. “nathankw”.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The DNAnexus username with a ‘user-‘ prefix.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><cite>str</cite></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="gbsc_dnanexus.utils.strip_dx_orgprefix">
<code class="descclassname">gbsc_dnanexus.utils.</code><code class="descname">strip_dx_orgprefix</code><span class="sig-paren">(</span><em>org</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gbsc_dnanexus/utils.html#strip_dx_orgprefix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gbsc_dnanexus.utils.strip_dx_orgprefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the “org-” prefix of the passed-in DNAnexus org name if it is present.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>org</strong> – <cite>str</cite>. i.e. “org-scgpm”.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The DNAnexus org ID without the “org-” prefix.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><cite>str</cite></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="gbsc_dnanexus.utils.add_dx_orgprefix">
<code class="descclassname">gbsc_dnanexus.utils.</code><code class="descname">add_dx_orgprefix</code><span class="sig-paren">(</span><em>org</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gbsc_dnanexus/utils.html#add_dx_orgprefix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gbsc_dnanexus.utils.add_dx_orgprefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the ‘org-‘ prefix of the passed-in DNAnexus org name if it isn’t already present.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>org</strong> – <cite>str</cite>. i.e. “scgpm”.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The DNAnexus org ID.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><cite>str</cite></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="gbsc_dnanexus.utils.validate_billed_to_prefix">
<code class="descclassname">gbsc_dnanexus.utils.</code><code class="descname">validate_billed_to_prefix</code><span class="sig-paren">(</span><em>billing_account_id</em>, <em>exception=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gbsc_dnanexus/utils.html#validate_billed_to_prefix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gbsc_dnanexus.utils.validate_billed_to_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks whether the billing account ID begins with “user-” in the case of an individual billing
accout, or “org-” in the case of an org billing account.”</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>billing_account_id</strong> – <cite>str</cite>. The name of the DNAnexus billing account, specifying either a
user billing account or an org billing account.</li>
<li><strong>exception</strong> – <cite>bool</cite>. If True, then when the validation fails, a
gbsc_utils.utils.InvalidBillingAccountId() exception is raised.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><dl class="docutils">
<dt><cite>True</cite> if the validation passes, <cite>False</cite> if the validation fails and the <cite>exception</cite></dt>
<dd><p class="first last">argument is set to <cite>False</cite>.</p>
</dd>
</dl>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><cite>bool</cite></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last">gbsc_utils.utils.InvalidBillingAccountId() if the validation fails and the ‘exception’ argument is set to True.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="gbsc_dnanexus.utils.invite_user_to_org_projects">
<code class="descclassname">gbsc_dnanexus.utils.</code><code class="descname">invite_user_to_org_projects</code><span class="sig-paren">(</span><em>self</em>, <em>org</em>, <em>invitee</em>, <em>created_after</em>, <em>access_level</em>, <em>send_email=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gbsc_dnanexus/utils.html#invite_user_to_org_projects"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gbsc_dnanexus.utils.invite_user_to_org_projects" title="Permalink to this definition">¶</a></dt>
<dd><p>Invites the specified DNAnexus user (the <cite>invitee</cite>) to all projects in the specified
org (that the current user has access to) with the specified access level.</p>
<p>This is typically used by an admin of the org in order to give himself or another user of the org
some access level in each project.
Even an admin of the org doesn’t see projects in the org unless they are specifically
transferred to or shared with the him.</p>
<p>The dxpy invite method call is idempotent, nonetheless, only projects belonging to the org where
the invitee doesn’t have the specified access level are processed. Note that the user making this
called should be an admin</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>created_after</strong> – Date (e.g. 2012-01-01) or integer timestamp after which the project was created
(negative number means in the past, or use suffix s, m, h, d, w, M, y)”)</li>
<li><strong>org</strong> – <cite>str</cite>. The name of the DNAnexus org to search for projects to invite the user to.</li>
<li><strong>invitee</strong> – <cite>str</cite>. The login name of the DNAnexus user to receive the invitations to the
projects in the org.</li>
<li><strong>access_level</strong> – <cite>str</cite>. One of [“VIEW”,”UPLOAD”,”CONTRIBUTE”,”ADMINISTER”], which specifies the
permission level that the new member should have on shared projects.
See <a class="reference external" href="https://wiki.dnanexus.com/API-Specification-v1.0.0/Project-Permissions-and-Sharing">https://wiki.dnanexus.com/API-Specification-v1.0.0/Project-Permissions-and-Sharing</a>
for details on the different access levels.</li>
<li><strong>send_email</strong> – <cite>bool</cite>. <cite>True</cite> means to allow the dxpy API send an email notification to <cite>invitee</cite>
for each project that <cite>invitee</cite> is invited to.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><dl class="docutils">
<dt>Each key is a name of a DNAnexus project that the user was invited to, and whose value</dt>
<dd><p class="first last">is the project’s ID.</p>
</dd>
</dl>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><cite>dict</cite></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="gbsc_dnanexus.utils.select_newest_project">
<code class="descclassname">gbsc_dnanexus.utils.</code><code class="descname">select_newest_project</code><span class="sig-paren">(</span><em>dx_project_ids</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gbsc_dnanexus/utils.html#select_newest_project"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gbsc_dnanexus.utils.select_newest_project" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of DNAnexus project IDs, returns the one that is newest as determined by creation date.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dx_project_ids</strong> – <cite>list</cite> of DNAnexus project IDs.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><cite>dxpy.DXProject</cite> instance</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">GBSC DNAnexus package</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/utils.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Nathaniel Watson.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/utils.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>